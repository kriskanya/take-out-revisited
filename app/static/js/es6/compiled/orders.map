{"version":3,"file":"orders.js","sources":["/Users/kristiankanya/Documents/Code/take-out-revisited/app/static/js/es6/orders.es6.js"],"names":[],"mappings":"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","sourcesContent":["/* global ajax */\n/* jshint unused: false */\n\n(function(){\n  'use strict';\n\n  $(document).ready(init);\n\n  function init(){\n    $('#order').on('change', '.menu', getMenu);  //on change, run the getMenu function\n    $('#add').click(getRow);\n    $('#order').on('click', '#delete', deleteRow);\n\n    $('form#order').on('change', 'input', changeText);\n    // $('form#order').on('change', '.dish', changeText);\n    // $('form#order').on('change', '.menu', changeText);\n    $('form#order').on('blur', 'input', changeText);\n  }\n\n  function changeText(){\n    var total = 0;\n    var calories = 0;\n\n    $('.menu-item').toArray().forEach(x=>{\n\n      var quantity = $(x).children('input').val();\n      var cost = $(x).children('.dish').find(':selected').attr('data-cost');\n      var cals = $(x).children('.dish').find(':selected').attr('data-calories');\n\n      if(quantity > 0){\n        total += quantity * cost;\n        calories += cals * quantity;\n      }\n    });\n\n    $('#orderTotal').text(total);\n    $('#calories').text(calories);\n\n    $('.calories').val(calories);\n    $('.cost').val(total);\n\n  }\n\n  function getMenu(){\n    var menu = $(this).val();    //this represents the select\n    var next = $(this).next();  //selects the 'next' select box\n    ajax(`/dishes/${menu}`, 'get', null, h=>{  //the last one is what we want to get back\n      next.empty().append(h);\n    });\n  }\n\n  function getRow(){\n    //this will create a new row\n    // ajax(`/orders/addmenu`, 'get', null, m=>{\n    //   $('#order').append(m);\n    // });\n\n    var item = $('.menu-item:first-child').clone();\n    $('#order').append(item);\n  }\n\n  function deleteRow(e){\n    var menus = $('.menu-item').length;\n    if(menus > 1){\n      $(this).closest('.menu-item').remove();\n    }\n    e.preventDefault();  //prevents the button from submitting the form\n  }\n\n\n})();\n"]}